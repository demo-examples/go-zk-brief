接口说明
=============


接口需知
=============
1. 以 `ip2city.http` 为例
2. zk集群名称说明::

    qa:  测试集群
    yz:  亦庄集群
    g1:  g1集群

3. 所有操作都是在 `/soa/services` 目录下
4. 返回值code为1表示请求成功，为0表示请求失败



[接口]创建结点
-------------------
url: createnode/
参数::

    key:
    destName: 服务名
    zkNode: zk集群名(qa, yz, g1)

返回值:

    {code: 1}


[接口]查看服务列表
------------------------
url: servicelist/
参数::

    key
    zkNode

返回值::

    {code:1, services: [
        {service: <service>},
        {service: <service>}
    ]}

举例说明::

    {"code" : 1, "services" [
        {"service" : "ip2city.http"},
        {"service" : "idserver.thrift.http"}
    ]}


[接口]新增服务
-------------------
url: addservice/
参数::

    key:
    destName:
    zkNode:

返回值::

    {code: 1}


[接口]删除服务(需慎重)
--------------------------
url: deleteservice/
参数::

    key:
    destName:
    zkNode:

返回值::

    {code: 1}


[接口]查看指定服务的服务器列表
----------------------------------
url: serverlist/
参数::

    key
    destName:
    zkNode:

返回值::

    {code:1, servers: [
        {host: <host>, port:<port>}
    ]}

举例说明::

    {"code" : 1, "servers" : [
       {"host" : "192.168.1.1", "port" : 8080},
       {"host" : "192.168.1.2", "port" : 8080},
       {"host" : "192.168.1.3", "port" : 8080}
    ]}



[接口]给指定服务新增服务器
----------------------------
url: addserver/
参数::

    key:
    destName:
    zkNode:
    serverHost:
    serverPort:

返回值::

    {code: 1}


[接口]删除指定服务的服务器
----------------------------------
url: deleteserver/
参数::

    key:
    destName:
    zkNode:
    serverHost:
    serverPort:

返回值::

    {code: 1}




错误返回值
----------------
::

    0: 失败
    {code: 0, reason: <reason>}

举例::

    
    {"code": 0, "reason": "interal server error!"}

    {"Code":0,"Reason":{"Value":"object","Type":{}}}




